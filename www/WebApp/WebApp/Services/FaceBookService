using System;
using System.Collections.Generic;
using System.Net.Http;
using System.Threading.Tasks;
using Newtonsoft.Json;

public class FacebookPost
{
    public string Message { get; set; }
    public DateTime CreatedTime { get; set; }
}

public class FacebookPageResponse
{
    public List<FacebookPost> Data { get; set; }
}

public class FacebookApiClient
{
    private readonly HttpClient _httpClient;

    public FacebookApiClient()
    {
        _httpClient = new HttpClient();
    }

    public async Task<List<FacebookPost>> GetLatestPosts(string pageId, int limit = 3)
    {
        var accessToken = "YOUR_ACCESS_TOKEN";
        var apiUrl = $"https://graph.facebook.com/{pageId}/posts?limit={limit}&access_token={accessToken}";

        var response = await _httpClient.GetAsync(apiUrl);
        if (response.IsSuccessStatusCode)
        {
            var content = await response.Content.ReadAsStringAsync();
            var pageResponse = JsonConvert.DeserializeObject<FacebookPageResponse>(content);
            return pageResponse?.Data;
        }

        return null;
    }
}
